#!/usr/bin/env python3
import os
import sys

if '--console' in sys.argv:
    from notifymuch.messages import Messages
    from notifymuch import config
    config.load()
    summary = Messages().summary()
    if summary:
        print(summary)
else:
    # Background ourselves for consistent behaviour, because show_notification
    # may or may not block.
    pid = os.fork()
    if pid > 0:
        os._exit(0)

    from notifymuch.notification import show_notification
    show_notification()
